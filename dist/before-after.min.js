(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory(root))}else if(typeof exports==="object"){module.exports=factory(root)}else{root.beforeAfter=factory(root)}})(typeof global!=="undefined"?global:this.window||this.global,function(root){"use strict";var supports=!!document.querySelector&&!!root.addEventListener;var settings;var defaults={el:"before-after",before:"",after:"",callbackBefore:function(){},callbackAfter:function(){}};var forEach=function(collection,callback,scope){if(Object.prototype.toString.call(collection)==="[object Object]"){for(var prop in collection){if(Object.prototype.hasOwnProperty.call(collection,prop)){callback.call(scope,collection[prop],prop,collection)}}}else{for(var i=0,len=collection.length;i<len;i++){callback.call(scope,collection[i],i,collection)}}};var extend=function(defaults,options){var extended={};forEach(defaults,function(value,prop){extended[prop]=defaults[prop]});forEach(options,function(value,prop){extended[prop]=options[prop]});return extended};var eventHandler=function(e){settings.callbackBefore;var target=e.target;var x=0;var totalOffsetX=0;var container=target.parentNode.parentNode;var currentElement=container;do{totalOffsetX+=currentElement.offsetLeft-currentElement.scrollLeft}while(currentElement=currentElement.offsetParent);x=e.pageX-totalOffsetX;if(e.type=="touchmove"){x=e.touches[0].pageX-totalOffsetX}if(x<=parseInt(container.style.width)){container.getElementsByTagName("div")[0].style.width=x+"px"}settings.callbackAfter};var createBeforeAndAfterDiv=function(beforeImg,afterImg){var beforeDiv=document.createElement("div");var afterDiv=document.createElement("div");beforeDiv.classList.add("before-image");beforeDiv.style.position="relative";beforeDiv.style.overflow="hidden";beforeDiv.style["z-index"]=2;beforeDiv.style["border-right"]="3px solid #000";beforeDiv.style.width="50%";afterDiv.classList.add("after-image");afterDiv.style.position="absolute";afterDiv.style.left="0px";afterDiv.style.top="0px";afterDiv.style["z-index"]=1;beforeDiv.appendChild(beforeImg);afterDiv.appendChild(afterImg);return[beforeDiv,afterDiv]};var createImages=function(beforeImgSrc,afterImgSrc){var beforeImg=new Image;var afterImg=new Image;beforeImg.src=beforeImgSrc;afterImg.src=afterImgSrc;return[beforeImg,afterImg]};var beforeAfter=function(options){if(!supports)return;var divs,container,images;settings=extend(defaults,options||{});if(settings.el.nodeType===Node.ELEMENT_NODE){container=settings.el}else{container=document.getElementById(settings.el)}container.style.cursor="col-resize";container.style.position="relative";if(settings.before==""||settings.after==""){console.error("Images for the container #"+container.id+" "+container+" were not specified");return false}if(typeof settings.before=="object"){images=[settings.before,settings.after];container.style.width=settings.before.width+"px"}else{images=createImages(settings.before,settings.after);images[0].onload=function(){container.style.width=this.width+"px"};container.appendChild(images[0]);container.appendChild(images[1])}divs=createBeforeAndAfterDiv(images[0],images[1]);container.appendChild(divs[0]);container.appendChild(divs[1]);container.addEventListener("mouseover",eventHandler,false);container.addEventListener("mousemove",eventHandler,false);container.addEventListener("touchmove",eventHandler,false)};window.onload=function(){forEach(document.querySelectorAll("[data-before-after]"),function(element){if(!element.getElementsByTagName("img").length>2){return}var beforeImg=element.getElementsByTagName("img")[0];var afterImg=element.getElementsByTagName("img")[1];beforeAfter({el:element,before:beforeImg,after:afterImg})})};return beforeAfter});